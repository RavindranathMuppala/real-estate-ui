{"ast":null,"code":"import { toBase64 } from '@smithy/util-base64';\n\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst serializeAiContext = aiContext => JSON.stringify(aiContext);\nconst serializeContent = content => content.map(block => {\n  if (block.image) {\n    return serializeImageBlock(block);\n  }\n  if (block.document) {\n    return serializeDocumentBlock(block);\n  }\n  if (block.toolResult) {\n    return serializeToolResultBlock(block);\n  }\n  return block;\n});\nconst serializeToolConfiguration = _ref => {\n  let {\n    tools\n  } = _ref;\n  return {\n    tools: Object.entries(tools).map(_ref2 => {\n      let [name, tool] = _ref2;\n      return {\n        toolSpec: {\n          name,\n          description: tool.description,\n          inputSchema: {\n            json: JSON.stringify(tool.inputSchema.json)\n          }\n        }\n      };\n    })\n  };\n};\nconst serializeImageBlock = _ref3 => {\n  let {\n    image\n  } = _ref3;\n  return {\n    image: {\n      ...image,\n      source: {\n        ...image.source,\n        bytes: toBase64(image.source.bytes)\n      }\n    }\n  };\n};\nconst serializeDocumentBlock = _ref4 => {\n  let {\n    document\n  } = _ref4;\n  return {\n    document: {\n      ...document,\n      source: {\n        ...document.source,\n        bytes: toBase64(document.source.bytes)\n      }\n    }\n  };\n};\nconst serializeJsonBlock = _ref5 => {\n  let {\n    json\n  } = _ref5;\n  return {\n    json: JSON.stringify(json)\n  };\n};\nconst serializeToolResultBlock = _ref6 => {\n  let {\n    toolResult\n  } = _ref6;\n  return {\n    toolResult: {\n      ...toolResult,\n      content: toolResult.content.map(toolResultBlock => {\n        if (toolResultBlock.image) {\n          return serializeImageBlock(toolResultBlock);\n        }\n        if (toolResultBlock.json) {\n          return serializeJsonBlock(toolResultBlock);\n        }\n        return toolResultBlock;\n      })\n    }\n  };\n};\nexport { serializeAiContext, serializeContent, serializeToolConfiguration };","map":{"version":3,"names":["serializeAiContext","aiContext","JSON","stringify","serializeContent","content","map","block","image","serializeImageBlock","document","serializeDocumentBlock","toolResult","serializeToolResultBlock","serializeToolConfiguration","_ref","tools","Object","entries","_ref2","name","tool","toolSpec","description","inputSchema","json","_ref3","source","bytes","toBase64","_ref4","serializeJsonBlock","_ref5","_ref6","toolResultBlock"],"sources":["D:\\real-estate-ui\\node_modules\\@aws-amplify\\data-schema\\src\\runtime\\internals\\ai\\conversationMessageSerializers.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { toBase64 } from '@smithy/util-base64';\nexport const serializeAiContext = (aiContext) => JSON.stringify(aiContext);\nexport const serializeContent = (content) => content.map((block) => {\n    if (block.image) {\n        return serializeImageBlock(block);\n    }\n    if (block.document) {\n        return serializeDocumentBlock(block);\n    }\n    if (block.toolResult) {\n        return serializeToolResultBlock(block);\n    }\n    return block;\n});\nexport const serializeToolConfiguration = ({ tools }) => ({\n    tools: Object.entries(tools).map(([name, tool]) => ({\n        toolSpec: {\n            name,\n            description: tool.description,\n            inputSchema: {\n                json: JSON.stringify(tool.inputSchema.json),\n            },\n        },\n    })),\n});\nconst serializeImageBlock = ({ image }) => ({\n    image: {\n        ...image,\n        source: {\n            ...image.source,\n            bytes: toBase64(image.source.bytes),\n        },\n    },\n});\nconst serializeDocumentBlock = ({ document, }) => ({\n    document: {\n        ...document,\n        source: {\n            ...document.source,\n            bytes: toBase64(document.source.bytes),\n        },\n    },\n});\nconst serializeJsonBlock = ({ json }) => ({\n    json: JSON.stringify(json),\n});\nconst serializeToolResultBlock = ({ toolResult, }) => ({\n    toolResult: {\n        ...toolResult,\n        content: toolResult.content.map((toolResultBlock) => {\n            if (toolResultBlock.image) {\n                return serializeImageBlock(toolResultBlock);\n            }\n            if (toolResultBlock.json) {\n                return serializeJsonBlock(toolResultBlock);\n            }\n            return toolResultBlock;\n        }),\n    },\n});\n"],"mappings":";;AAAA;AACA;AAEY,MAACA,kBAAkB,GAAIC,SAAS,IAAKC,IAAI,CAACC,SAAS,CAACF,SAAS;AAC7D,MAACG,gBAAgB,GAAIC,OAAO,IAAKA,OAAO,CAACC,GAAG,CAAEC,KAAK,IAAK;EAChE,IAAIA,KAAK,CAACC,KAAK,EAAE;IACb,OAAOC,mBAAmB,CAACF,KAAK,CAAC;EACzC;EACI,IAAIA,KAAK,CAACG,QAAQ,EAAE;IAChB,OAAOC,sBAAsB,CAACJ,KAAK,CAAC;EAC5C;EACI,IAAIA,KAAK,CAACK,UAAU,EAAE;IAClB,OAAOC,wBAAwB,CAACN,KAAK,CAAC;EAC9C;EACI,OAAOA,KAAK;AAChB,CAAC;AACW,MAACO,0BAA0B,GAAGC,IAAA;EAAA,IAAC;IAAEC;EAAK,CAAE,GAAAD,IAAA;EAAA,OAAM;IACtDC,KAAK,EAAEC,MAAM,CAACC,OAAO,CAACF,KAAK,CAAC,CAACV,GAAG,CAACa,KAAA;MAAA,IAAC,CAACC,IAAI,EAAEC,IAAI,CAAC,GAAAF,KAAA;MAAA,OAAM;QAChDG,QAAQ,EAAE;UACNF,IAAI;UACJG,WAAW,EAAEF,IAAI,CAACE,WAAW;UAC7BC,WAAW,EAAE;YACTC,IAAI,EAAEvB,IAAI,CAACC,SAAS,CAACkB,IAAI,CAACG,WAAW,CAACC,IAAI;UAC1D;QACA;MACA,CAAK;IAAA,CAAC;EACN,CAAC;AAAA;AACD,MAAMhB,mBAAmB,GAAGiB,KAAA;EAAA,IAAC;IAAElB;EAAK,CAAE,GAAAkB,KAAA;EAAA,OAAM;IACxClB,KAAK,EAAE;MACH,GAAGA,KAAK;MACRmB,MAAM,EAAE;QACJ,GAAGnB,KAAK,CAACmB,MAAM;QACfC,KAAK,EAAEC,QAAQ,CAACrB,KAAK,CAACmB,MAAM,CAACC,KAAK;MAC9C;IACA;EACA,CAAC;AAAA,CAAC;AACF,MAAMjB,sBAAsB,GAAGmB,KAAA;EAAA,IAAC;IAAEpB;EAAQ,CAAG,GAAAoB,KAAA;EAAA,OAAM;IAC/CpB,QAAQ,EAAE;MACN,GAAGA,QAAQ;MACXiB,MAAM,EAAE;QACJ,GAAGjB,QAAQ,CAACiB,MAAM;QAClBC,KAAK,EAAEC,QAAQ,CAACnB,QAAQ,CAACiB,MAAM,CAACC,KAAK;MACjD;IACA;EACA,CAAC;AAAA,CAAC;AACF,MAAMG,kBAAkB,GAAGC,KAAA;EAAA,IAAC;IAAEP;EAAI,CAAE,GAAAO,KAAA;EAAA,OAAM;IACtCP,IAAI,EAAEvB,IAAI,CAACC,SAAS,CAACsB,IAAI;EAC7B,CAAC;AAAA,CAAC;AACF,MAAMZ,wBAAwB,GAAGoB,KAAA;EAAA,IAAC;IAAErB;EAAU,CAAG,GAAAqB,KAAA;EAAA,OAAM;IACnDrB,UAAU,EAAE;MACR,GAAGA,UAAU;MACbP,OAAO,EAAEO,UAAU,CAACP,OAAO,CAACC,GAAG,CAAE4B,eAAe,IAAK;QACjD,IAAIA,eAAe,CAAC1B,KAAK,EAAE;UACvB,OAAOC,mBAAmB,CAACyB,eAAe,CAAC;QAC3D;QACY,IAAIA,eAAe,CAACT,IAAI,EAAE;UACtB,OAAOM,kBAAkB,CAACG,eAAe,CAAC;QAC1D;QACY,OAAOA,eAAe;MAClC,CAAS;IACT;EACA,CAAC;AAAA,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}